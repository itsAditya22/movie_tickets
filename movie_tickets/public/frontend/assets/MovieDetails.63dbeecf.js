import{y as L,l as j,r as D,z as M,a as w,u as o,e as i,n as e,t as f,f as x,w as _,F as h,m as v,p,A as C,g as B,o as l,x as y,B as q}from"./vendor.2e7dd282.js";const G={key:0},H={class:"text-gray-900 font-bold text-[32px]"},J={class:"mt-11 flex flex-row items-center justify-between"},P={class:"flex flex-col space-y-3"},U=e("h2",{class:"text-gray-700 text-base font-bold uppercase"},"Director",-1),K={class:"text-gray-600 text-xl font-semibold"},Q={class:"flex flex-col space-y-3"},W=e("h2",{class:"text-gray-700 text-base font-bold uppercase"}," Release Date ",-1),X={class:"text-gray-600 text-xl font-semibold"},Y={class:"max-w-full"},Z={key:0,class:"mx-12"},ee={class:"p-2 mt-7 bg-white shadow-2xl rounded"},te=["src"],se={class:"w-full flex items-center justify-center mt-7"},oe=y("Book Tickets"),le={class:"flex flex-col space-y-3 mt-16"},ne=e("h2",{class:"text-gray-700 text-base font-bold uppercase"},"Synopsis",-1),ae={class:"text-gray-600 text-lg font-normal"},ce={key:1},ie=e("h2",{class:"font-medium text-xl mt-7 text-gray-900"},"How many seats?",-1),re={class:"flex justify-center flex-wrap w-full space-x-4 mt-6"},ue=["onClick"],de={key:2},fe={class:"flex justify-center flex-wrap w-full space-y-4"},_e=e("h2",{class:"font-medium text-xl mt-7 text-gray-900"},"Date",-1),me={class:"flex flex-col space-y-4"},xe=e("h2",{class:"font-medium text-xl mt-7 text-gray-900"},"Cinema & Show",-1),he={class:"space-y-2"},ve={class:"text-sm font-bold text-gray-800"},pe={class:"flex flex-row space-x-2"},ye={key:3},be=e("h2",{class:"font-medium text-xl mt-7 text-gray-900"},"Select Seats",-1),ge=["onClick"],ke={key:4},Se=e("div",{class:"w-full flex items-center flex-col mt-7"},[e("h1",{class:"text-[110px]"},"\u{1F37F}"),e("h2",{class:"font-medium text-xl mt-7 text-gray-900"}," Enjoy the movie! ")],-1),we=[Se],Ce={class:"flex flex-row mt-6 space-x-2"},Be=y("Go Back"),Ne=y("Next"),je={props:{movieName:{type:String,required:!0}},setup($){const N=$,b=L({doctype:"Movie",name:N.movieName,onSuccess(r){console.log(r)},auto:!0}),O=j({doctype:"Theater Show",fields:["theater","start_time","name"],auto:!0,transform:r=>{const t={};for(const c of r)t[c.theater]||(t[c.theater]=[]),t[c.theater].push(c);return t}}),V=j({doctype:"Ticket Booking",insert:{onSuccess(){console.log("Booking Created!"),s.value++}}});function z(r,t){const c={};for(const d of r){c[d]=[];for(const S of t)c[d].push([S,"Available"])}return c}const g=D(z(["A","B","C","D","E"],[1,2,3,4,5,6,7])),A=new Date().toISOString().substr(0,10),s=M(0),a=D({numberOfSeats:1,selectedSeats:[],date:A,show:null});function E(r){a.numberOfSeats=r}function R(r,t){if(k.value)return;const c=g[r].find(d=>d[0]===t);c[1]="Selected",a.selectedSeats.push(`${r}${t}`)}const k=w(()=>a.selectedSeats.length===a.numberOfSeats),m=w(()=>b.doc),T=w(()=>{if(s.value===1)return a.numberOfSeats;if(s.value===2)return a.date&&a.show;if(s.value===3)return k.value});function I(){if(s.value!=3){s.value++;return}V.insert.submit({movie:N.movieName,date:a.date,show:a.show,selected_seats:JSON.stringify(a.selectedSeats),number_of_tickets:a.numberOfSeats})}return(r,t)=>{const c=B("Button"),d=B("center"),S=B("Input");return!o(b).loading&&o(b).doc?(l(),i("div",G,[e("h1",H,f(o(m).title),1),e("div",J,[e("div",P,[U,e("p",K,f(o(m).director),1)]),e("div",Q,[W,e("p",X,f(o(m).release_date),1)])]),e("div",Y,[s.value===0?(l(),i("div",Z,[e("div",ee,[e("img",{src:o(m).poster,alt:"Movie Poster"},null,8,te)]),e("div",se,[x(c,{size:"xl",variant:"solid",onClick:t[0]||(t[0]=n=>s.value++)},{default:_(()=>[oe]),_:1})]),e("div",le,[ne,e("p",ae,f(o(m).synopsis),1)])])):s.value===1?(l(),i("div",ce,[x(d,null,{default:_(()=>[ie]),_:1}),e("div",re,[(l(),i(h,null,v(8,n=>e("button",{key:n,onClick:u=>E(n),class:"inline-block w-20 h-20 bg-blue-500 hover:bg-blue-600 text-white font-semibold rounded-lg shadow-lg transition duration-300 focus:outline-none focus:ring focus:ring-blue-800"},f(n),9,ue)),64))])])):s.value===2?(l(),i("div",de,[e("div",fe,[x(d,null,{default:_(()=>[_e,x(S,{type:"date",modelValue:o(a).date,"onUpdate:modelValue":t[1]||(t[1]=n=>o(a).date=n)},null,8,["modelValue"])]),_:1})]),e("div",me,[xe,e("div",he,[(l(!0),i(h,null,v(Object.keys(o(O).data),n=>(l(),i("div",{key:n.name,class:"bg-white shadow-xl p-4 rounded flex flex-col space-y-4"},[e("h3",ve,f(n),1),e("div",pe,[(l(!0),i(h,null,v(o(O).data[n],u=>(l(),C(c,{onClick:F=>o(a).show=u.name,key:u.name,size:"sm",variant:u.name===o(a).show?"subtle":"outline"},{default:_(()=>[y(f(u.start_time),1)]),_:2},1032,["onClick","variant"]))),128))])]))),128))])])])):s.value===3?(l(),i("div",ye,[x(d,null,{default:_(()=>[be]),_:1}),e("div",null,[(l(!0),i(h,null,v(Object.keys(o(g)),n=>(l(),i("div",{key:n,class:"flex justify-center flex-row"},[(l(!0),i(h,null,v(o(g)[n],u=>(l(),i("span",{onClick:F=>R(n,u[0]),class:q(["w-6 h-8 m-2 rounded-[2px]",[u[1]==="Available"?"bg-blue-300":u[1]==="Selected"?"bg-blue-600":"bg-gray-300",o(k)?"cursor-not-allowed":"cursor-pointer"]])},null,10,ge))),256))]))),128))])])):s.value===4?(l(),i("div",ke,we)):p("",!0)]),e("div",Ce,[s.value!==0&&s.value!==4?(l(),C(c,{key:0,size:"lg",variant:"subtle",onClick:t[2]||(t[2]=n=>s.value--)},{default:_(()=>[Be]),_:1})):p("",!0),s.value!==0&&s.value!==4?(l(),C(c,{key:1,disabled:!o(T),size:"lg",variant:"solid",onClick:t[3]||(t[3]=n=>I())},{default:_(()=>[Ne]),_:1},8,["disabled"])):p("",!0)])])):p("",!0)}}};export{je as default};
